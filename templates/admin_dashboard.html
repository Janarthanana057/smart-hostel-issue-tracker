<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <title>Management Control Center</title>
    <style>
        /* Horizontal layout for the top options */
        .admin-actions-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
            align-items: stretch;
        }

        .admin-card {
            flex: 1;
            min-width: 300px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-top: 5px solid #3498db;
        }

        .stats-card { border-top-color: #f1c40f; }
        .hiring-card { border-top-color: #2ecc71; }

        .stat-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            font-weight: bold;
        }

        form { display: flex; flex-direction: column; gap: 10px; }
        
        input, textarea, select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .btn {
            padding: 10px;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-weight: bold;
        }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
        th, td { padding: 12px; border: 1px solid #eee; text-align: left; }
        th { background: #34495e; color: white; }
    </style>
</head>
<body style="background: linear-gradient(135deg, #f4f7f6 0%, #e9ecef 100%); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 30px; margin: 0;">

    <header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; background: white; padding: 15px 30px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
        <h1 style="margin: 0; color: #2c3e50; font-size: 1.8em;">üè¢ Management Control Center</h1>
        <a href="/logout" style="text-decoration: none; color: #e74c3c; font-weight: bold; border: 1px solid #e74c3c; padding: 8px 16px; border-radius: 6px; transition: 0.3s;">Logout</a>
    </header>

    <div class="admin-actions-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 30px;">
        
        <div class="admin-card stats-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-top: 4px solid #3498db;">
            <h3 style="margin-top: 0; color: #34495e;">üìä Overview</h3>
            <div class="stat-item" style="background: #fff3cd; padding: 12px; border-radius: 8px; margin-bottom: 10px; font-weight: bold; color: #856404;">Pending: {{ pending_count }}</div>
            <div class="stat-item" style="background: #d4edda; padding: 12px; border-radius: 8px; font-weight: bold; color: #155724;">Resolved: {{ resolved_count }}</div>
        </div>

        <div class="admin-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-top: 4px solid #e67e22;">
            <h3 style="margin-top: 0; color: #34495e;">üì¢ Post Circular</h3>
            <form action="/admin/circular" method="POST" style="display: flex; flex-direction: column; gap: 10px;">
                <input type="text" name="title" placeholder="Title" required style="padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                <textarea name="content" placeholder="Details" required style="padding: 10px; border: 1px solid #ddd; border-radius: 6px; min-height: 80px;"></textarea>
                <button type="submit" style="background: #e67e22; color: white; border: none; padding: 10px; border-radius: 6px; cursor: pointer; font-weight: bold;">Publish Announcement</button>
            </form>
        </div>

        <div class="admin-card hiring-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-top: 4px solid #2ecc71;">
            <h3 style="margin-top: 0; color: #34495e;">üë∑ Hire Staff</h3>
            <form action="/admin/add_worker" method="POST" style="display: flex; flex-direction: column; gap: 10px;">
                <input type="text" name="worker_name" placeholder="Username" required style="padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                <input type="password" name="password" placeholder="Password" required style="padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                <select name="specialty" required style="padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    <option value="" disabled selected>Select Category</option>
                    <option value="Plumbing">Plumber</option>
                    <option value="Electrical">Electrician</option>
                    <option value="Cleanliness">Cleaning</option>
                    <option value="Internet">Internet Support</option>
                </select>
                <button type="submit" style="background: #2ecc71; color: white; border: none; padding: 10px; border-radius: 6px; cursor: pointer; font-weight: bold;">Hire Worker</button>
            </form>
        </div>
    </div>

    <div class="admin-card" style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 30px; border-top: 4px solid #9b59b6;">
        <h3 style="margin-top: 0; color: #34495e;">üë• Active Staff</h3>
        <div style="max-height: 250px; overflow-y: auto;">
            <table style="width: 100%; border-collapse: collapse; text-align: left;">
                <thead style="position: sticky; top: 0; background: #f8f9fa;">
                    <tr style="border-bottom: 2px solid #eee;">
                        <th style="padding: 12px;">Name</th>
                        <th style="padding: 12px;">Specialty</th>
                        <th style="padding: 12px;">Role</th>
                    </tr>
                </thead>
                <tbody>
                    {% for worker in workers %}
                    <tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 12px;">{{ worker.username }}</td>
                        <td style="padding: 12px;"><span style="color: #8e44ad; font-weight: bold;">{{ worker.specialty }}</span></td>
                        <td style="padding: 12px; color: #7f8c8d; font-size: 0.85em;">{{ worker.role | upper }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="table-container admin-card" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-top: 4px solid #34495e;">
        <h2 style="margin-top: 0; color: #2c3e50;">üìã All Campus Issues</h2>
        <table style="width: 100%; border-collapse: collapse; text-align: left;">
            <thead style="background: #34495e; color: white;">
                <tr>
                    <th style="padding: 15px; border-radius: 8px 0 0 0;">Category</th>
                    <th style="padding: 15px;">Status</th>
                    <th style="padding: 15px;">Worker ID</th>
                    <th style="padding: 15px; border-radius: 0 8px 0 0; text-align: center;">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for issue in issues %}
                <tr style="border-bottom: 1px solid #eee; transition: 0.2s;">
                    <td style="padding: 15px;">{{ issue.category }}</td>
                    <td style="padding: 15px;">
                        <span class="status-badge {{ issue.status | lower }}">
                            {{ issue.status }}
                        </span>
                    </td>
                    <td style="padding: 15px; color: #7f8c8d;">{{ issue.worker_id if issue.worker_id else 'Queue' }}</td>
                    <td style="padding: 15px; text-align: center;">
                        <button style="background: #f8f9fa; border: 1px solid #ddd; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.9em;">Update</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</body>
</html>